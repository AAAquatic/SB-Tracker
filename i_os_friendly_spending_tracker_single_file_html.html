<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Spending Tracker â€” iOS Friendly (Single File)</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <style>
    :root{
      --bg: #0b0c10;
      --card: #12141a;
      --muted: #9aa3b2;
      --text: #e6e9ef;
      --accent: #5b8cff;
      --accent-2: #6fe3c9;
      --danger: #ff6b6b;
      --ok: #78e08f;
      --ring: rgba(91, 140, 255, 0.4);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f6f7fb; --card:#ffffff; --text:#0a0d14; --muted:#6b7280; --shadow:0 10px 25px rgba(17,24,39,.08); }
    }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:var(--bg); color:var(--text); font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Inter, Arial, sans-serif;
    }
    .wrap{ max-width: 980px; margin: 0 auto; padding: calc(env(safe-area-inset-top) + 16px) 16px calc(env(safe-area-inset-bottom) + 90px); }
    header{ position: sticky; top:0; z-index:5; backdrop-filter: saturate(140%) blur(10px); background: color-mix(in oklab, var(--bg) 82%, transparent); border-bottom: 1px solid color-mix(in oklab, var(--text) 12%, transparent); }
    header .bar{ display:flex; align-items:center; justify-content:space-between; padding: 14px 16px; max-width:980px; margin:0 auto; }
    h1{ font-size: 22px; margin:0; letter-spacing:.2px; }
    .btn{
      border:1px solid color-mix(in oklab, var(--text) 12%, transparent);
      background: linear-gradient(180deg, color-mix(in oklab, var(--card) 86%, transparent), color-mix(in oklab, var(--card) 94%, black));
      color:var(--text); padding:10px 14px; border-radius: 12px; box-shadow: var(--shadow);
      display:inline-flex; align-items:center; gap:8px; font-weight:600; cursor:pointer; transition: transform .05s ease;
    }
    .btn:active{ transform: translateY(1px) }
    .btn.primary{ background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 26%, var(--card)), color-mix(in oklab, var(--accent) 38%, var(--card))); border-color: color-mix(in oklab, var(--accent) 42%, var(--card)); }
    .grid{ display:grid; gap:16px; grid-template-columns: 1fr; }
    @media (min-width: 860px){ .grid{ grid-template-columns: 1.6fr .9fr; } }
    .card{ background: var(--card); border:1px solid color-mix(in oklab, var(--text) 10%, transparent); border-radius: var(--radius); box-shadow: var(--shadow); }
    .card .head{ display:flex; align-items:center; justify-content:space-between; padding:16px 16px 0; }
    .card h2{ font-size: 16px; margin:0; color: var(--text); letter-spacing:.2px }
    .card .body{ padding: 12px 16px 16px; }
    .pill{ padding:6px 10px; border-radius:999px; font-weight:600; border:1px solid color-mix(in oklab, var(--text) 12%, transparent); color:var(--muted); }
    .muted{ color:var(--muted) }
    .row{ display:flex; gap:12px; flex-wrap:wrap; }
    label{ display:block; font-size:12px; color:var(--muted); margin-bottom:6px; }
    input, select{ width:100%; padding:12px; border-radius:12px; border:1px solid color-mix(in oklab, var(--text) 14%, transparent); background: color-mix(in oklab, var(--card) 92%, black); color:var(--text); outline: none; box-shadow: inset 0 1px 0 rgba(255,255,255,.03); }
    input:focus, select:focus{ border-color: var(--accent); box-shadow: 0 0 0 5px var(--ring); }
    .actions{ display:flex; gap:10px; flex-wrap:wrap }
    .totals{ display:flex; gap:14px; flex-wrap:wrap }
    .totals .kpi{ flex: 1 1 160px; background: color-mix(in oklab, var(--card) 98%, black); border:1px solid color-mix(in oklab, var(--text) 12%, transparent); padding:12px 14px; border-radius: 14px; }
    .kpi .big{ font-size: 24px; font-weight: 800; }
    .kpi .delta{ font-weight:700; }
    .up{ color: var(--ok) }
    .down{ color: var(--danger) }
    .list{ width:100%; border-collapse: collapse; }
    .list th, .list td{ padding:12px 8px; border-bottom:1px dashed color-mix(in oklab, var(--text) 12%, transparent); text-align:left }
    .list tr:last-child td{ border-bottom: none }
    .chip{ font-size: 12px; padding:6px 10px; border-radius:999px; background: color-mix(in oklab, var(--text) 10%, transparent); }
    .footer-nav{ position: fixed; z-index: 9; left:0; right:0; bottom:0; background: color-mix(in oklab, var(--card) 96%, black); border-top:1px solid color-mix(in oklab, var(--text) 14%, transparent); padding: 10px 14px calc(env(safe-area-inset-bottom) + 10px); display:flex; gap:10px; justify-content: center; flex-wrap:wrap }
    .footer-nav .btn{ padding:10px 12px }
    .flex{ display:flex; align-items:center; gap:10px }
    .spacer{ height: 8px }
    .chart{ width:100%; height: 220px; display:block }
    .spark{ width: 80px; height: 32px; display:inline-block; vertical-align: middle }
    .sr{ position:absolute; width:1px; height:1px; padding:0; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0 }
    details summary{ cursor:pointer; list-style:none; }
    details summary::-webkit-details-marker{ display:none }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <h1>ðŸ“Š Spending Tracker</h1>
      <button class="btn" id="btnExport" aria-label="Export data">Export</button>
    </div>
  </header>
  <div class="wrap">

    <div class="grid">
      <!-- Left: Chart + Transactions -->
      <section class="card" aria-labelledby="h-overview">
        <div class="head">
          <h2 id="h-overview">Overview</h2>
          <span class="pill" id="currentMonthLabel">Loadingâ€¦</span>
        </div>
        <div class="body">
          <div class="totals" role="group" aria-label="Key totals">
            <div class="kpi">
              <div class="muted">This Month Spent</div>
              <div class="big" id="kpiSpent">$0.00</div>
              <div class="muted"><span id="spentDelta" class="delta">â€“</span> vs last month <svg class="spark" id="sparkSpent" viewBox="0 0 80 32" preserveAspectRatio="none"></svg></div>
            </div>
            <div class="kpi">
              <div class="muted">This Month Income</div>
              <div class="big" id="kpiIncome">$0.00</div>
              <div class="muted"><span id="incomeDelta" class="delta">â€“</span> vs last month</div>
            </div>
            <div class="kpi">
              <div class="muted">Net</div>
              <div class="big" id="kpiNet">$0.00</div>
              <div class="muted">Budget <span id="budgetBadge" class="chip">$0.00</span></div>
            </div>
          </div>
          <div class="spacer"></div>
          <svg class="chart" id="barChart" viewBox="0 0 1000 300" preserveAspectRatio="none" role="img" aria-label="Spending by month"></svg>
        </div>
      </section>

      <!-- Right: Add Transaction / Presets -->
      <aside class="card" aria-labelledby="h-add">
        <div class="head">
          <h2 id="h-add">Quick Add</h2>
          <button class="btn" id="seedBtn" title="Initialize with your Fall plan">Seed My Fall Plan</button>
        </div>
        <div class="body">
          <form id="txForm" autocomplete="off">
            <div class="row">
              <div style="flex:1 1 120px">
                <label for="date">Date</label>
                <input id="date" type="date" required />
              </div>
              <div style="flex:1 1 120px">
                <label for="type">Type</label>
                <select id="type">
                  <option value="expense">Expense</option>
                  <option value="income">Income</option>
                </select>
              </div>
            </div>
            <div class="row">
              <div style="flex:2 1 200px">
                <label for="desc">Description</label>
                <input id="desc" placeholder="e.g., Gas, Tuition, Pell disbursement" required />
              </div>
              <div style="flex:1 1 120px">
                <label for="amount">Amount</label>
                <input id="amount" type="number" step="0.01" inputmode="decimal" placeholder="0.00" required />
              </div>
            </div>
            <div class="row">
              <div style="flex:1 1 180px">
                <label for="cat">Category</label>
                <input id="cat" list="catList" placeholder="Select or type" />
                <datalist id="catList"></datalist>
              </div>
            </div>
            <div class="actions">
              <button class="btn primary" type="submit">Add</button>
              <button class="btn" type="button" id="btnClear">Clear Month</button>
              <button class="btn" type="button" id="btnImport">Import</button>
            </div>
          </form>
          <details style="margin-top:12px">
            <summary class="muted">Budget Settings</summary>
            <div class="row" style="margin-top:10px">
              <div style="flex:1 1 160px">
                <label for="monthlyBudget">Monthly Budget (expenses)</label>
                <input id="monthlyBudget" type="number" step="0.01" inputmode="decimal" />
              </div>
            </div>
          </details>
        </div>
      </aside>
    </div>

    <!-- Transactions list -->
    <section class="card" aria-labelledby="h-list" style="margin-top:16px">
      <div class="head">
        <h2 id="h-list">Transactions</h2>
        <div class="actions">
          <button class="btn" id="prevMonth">â—€ Previous</button>
          <button class="btn" id="nextMonth">Next â–¶</button>
        </div>
      </div>
      <div class="body">
        <table class="list" id="txTable">
          <thead><tr><th>Date</th><th>Description</th><th>Category</th><th>Type</th><th>Amount</th><th></th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section class="card" aria-labelledby="h-help" style="margin-top:16px">
      <div class="head"><h2 id="h-help">Tips</h2></div>
      <div class="body">
        <ul>
          <li>Tap <b>Seed My Fall Plan</b> to preload your school costs, monthly bills, savings, and loan disbursement. Edit as needed.</li>
          <li>Everything saves automatically to your device (localStorage). No sign-in needed.</li>
          <li>Use <b>Export</b> to copy a portable JSON backup. Use <b>Import</b> to paste it back later.</li>
        </ul>
      </div>
    </section>

  </div>

  <nav class="footer-nav" aria-label="Quick actions">
    <button class="btn primary" id="quickExpense">+ Expense</button>
    <button class="btn" id="quickIncome">+ Income</button>
    <button class="btn" id="jumpToday">Today</button>
  </nav>

  <template id="rowTpl">
    <tr>
      <td data-k="date"></td>
      <td data-k="desc"></td>
      <td data-k="cat"></td>
      <td data-k="type"></td>
      <td data-k="amount"></td>
      <td><button class="btn" data-k="del">Delete</button></td>
    </tr>
  </template>

  <script>
  ;(() => {
    const $ = sel => document.querySelector(sel);
    const $$ = sel => Array.from(document.querySelectorAll(sel));

    // ------- Storage -------
    const KEY = 'ios_spending_tracker_v1';
    const state = load();

    function load(){
      try{ return JSON.parse(localStorage.getItem(KEY)) || { tx: [], budget: 316.19, cats: defaultCats() } }catch{ return { tx: [], budget: 316.19, cats: defaultCats() } }
    }
    function save(){ localStorage.setItem(KEY, JSON.stringify(state)); }

    function defaultCats(){
      return ['Gas','Car Payment','ChatGPT','Canva','Medication','Groceries','Dining','Parking','Tuition','Misc','Savings','Loan','Job Income','Pell Grant'];
    }

    // ------- Helpers -------
    const toMoney = n => (n||0).toLocaleString(undefined,{style:'currency',currency:'USD'});
    const ymKey = d => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;
    const startOfMonth = (y,m) => new Date(y,m,1);
    const endOfMonth = (y,m) => new Date(y,m+1,0);
    const today = new Date();

    // ------- Elements -------
    const form = $('#txForm');
    const dateIn = $('#date');
    const typeIn = $('#type');
    const descIn = $('#desc');
    const amtIn = $('#amount');
    const catIn = $('#cat');
    const catList = $('#catList');

    const tbl = $('#txTable tbody');
    const monthLabel = $('#currentMonthLabel');
    const kpiSpent = $('#kpiSpent');
    const kpiIncome = $('#kpiIncome');
    const kpiNet = $('#kpiNet');
    const budgetBadge = $('#budgetBadge');
    const monthlyBudget = $('#monthlyBudget');

    const barChart = $('#barChart');
    const sparkSpent = $('#sparkSpent');

    // Navigation
    let viewMonth = today.getMonth();
    let viewYear = today.getFullYear();

    function setDateInputToView(){
      const d = new Date(viewYear, viewMonth, Math.min( new Date(viewYear, viewMonth+1, 0).getDate(), today.getDate()));
      dateIn.valueAsDate = d;
    }

    function refreshCats(){
      catList.innerHTML = '';
      state.cats.forEach(c=>{
        const o = document.createElement('option');
        o.value = c; catList.appendChild(o);
      });
    }

    function addCat(c){ if(!state.cats.includes(c)){ state.cats.push(c); save(); refreshCats(); } }

    function addTx({date, type, desc, amount, cat}){
      const id = crypto.randomUUID();
      state.tx.push({ id, date, type, desc, amount: Number(amount), cat });
      addCat(cat);
      save();
      render();
    }

    function delTx(id){
      const i = state.tx.findIndex(t=>t.id===id);
      if(i>-1){ state.tx.splice(i,1); save(); render(); }
    }

    function txForMonth(y,m){
      const start = startOfMonth(y,m);
      const end = endOfMonth(y,m);
      return state.tx.filter(t=>{ const d = new Date(t.date); return d>=start && d<=end; });
    }

    function groupByMonth(){
      const map = new Map();
      state.tx.forEach(t=>{
        const d = new Date(t.date); const key = ymKey(d);
        const arr = map.get(key) || []; arr.push(t); map.set(key, arr);
      });
      return map;
    }

    function calcTotals(list){
      const spent = list.filter(t=>t.type==='expense').reduce((a,b)=>a+b.amount,0);
      const income = list.filter(t=>t.type==='income').reduce((a,b)=>a+b.amount,0);
      return { spent, income, net: income - spent };
    }

    function delta(curr, prev){
      if(prev === 0) return { pct: 0, cls: '' };
      const change = (curr - prev) / Math.abs(prev) * 100;
      return { pct: change, cls: change >= 0 ? 'up' : 'down' };
    }

    function monthName(y,m){
      return new Date(y,m,1).toLocaleString(undefined,{ month:'long', year:'numeric' });
    }

    // ------- Render -------
    function render(){
      monthLabel.textContent = monthName(viewYear, viewMonth);
      setDateInputToView();
      refreshCats();

      // budget
      monthlyBudget.value = state.budget ?? 316.19;
      budgetBadge.textContent = toMoney(state.budget ?? 316.19);

      // table
      const rows = txForMonth(viewYear, viewMonth).sort((a,b)=> new Date(b.date) - new Date(a.date));
      tbl.innerHTML = '';
      for(const t of rows){
        const tr = document.importNode($('#rowTpl').content, true);
        tr.querySelector('[data-k="date"]').textContent = new Date(t.date).toLocaleDateString();
        tr.querySelector('[data-k="desc"]').textContent = t.desc;
        tr.querySelector('[data-k="cat"]').textContent = t.cat;
        tr.querySelector('[data-k="type"]').innerHTML = t.type === 'expense' ? `<span class="chip">Expense</span>` : `<span class="chip" style="background: color-mix(in oklab, var(--accent-2) 20%, transparent)">Income</span>`;
        tr.querySelector('[data-k="amount"]').textContent = toMoney(t.amount);
        tr.querySelector('[data-k="del"]').addEventListener('click', ()=>delTx(t.id));
        tbl.appendChild(tr);
      }

      // totals + deltas
      const thisM = calcTotals(rows);
      const prevDate = new Date(viewYear, viewMonth-1, 1);
      const prevRows = txForMonth(prevDate.getFullYear(), prevDate.getMonth());
      const lastM = calcTotals(prevRows);

      kpiSpent.textContent = toMoney(thisM.spent);
      kpiIncome.textContent = toMoney(thisM.income);
      kpiNet.textContent = toMoney(thisM.net);

      const dSpent = delta(lastM.spent===0?0:thisM.spent, lastM.spent);
      const dIncome = delta(lastM.income===0?0:thisM.income, lastM.income);

      $('#spentDelta').className = 'delta ' + (dSpent.cls||'');
      $('#spentDelta').textContent = (dSpent.pct===0 && lastM.spent===0) ? 'â€”' : `${dSpent.pct>0?'+':''}${dSpent.pct.toFixed(1)}%`;
      $('#incomeDelta').className = 'delta ' + (dIncome.cls||'');
      $('#incomeDelta').textContent = (dIncome.pct===0 && lastM.income===0) ? 'â€”' : `${dIncome.pct>0?'+':''}${dIncome.pct.toFixed(1)}%`;

      drawBars();
      drawSpark();
    }

    // ------- Charts (pure SVG) -------
    function drawBars(){
      const map = groupByMonth();
      // Collect last 12 months keys
      const months = [];
      const start = new Date(viewYear, viewMonth-11, 1);
      for(let i=0;i<12;i++){
        const d = new Date(start.getFullYear(), start.getMonth()+i, 1);
        months.push({ key: ymKey(d), label: d.toLocaleString(undefined,{month:'short'}), y:d.getFullYear(), m:d.getMonth() });
      }
      const data = months.map(({key,y,m})=>{
        const list = txForMonth(y,m);
        const {spent,income} = calcTotals(list);
        return { spent, income };
      });
      const maxVal = Math.max( 100, ...data.map(d=>Math.max(d.spent,d.income)) );
      const W=1000, H=300, pad=40, innerH=H-pad-24, barW = (W - pad*2) / (months.length*2);
      let svg = `<rect x="0" y="0" width="${W}" height="${H}" fill="transparent"/>`;
      // grid lines
      for(let i=0;i<=4;i++){
        const y = pad + (innerH) * (i/4);
        svg += `<line x1="${pad}" y1="${y}" x2="${W-pad}" y2="${y}" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--muted').trim()}20" stroke-width="1"/>`;
      }
      months.forEach((m, idx)=>{
        const x0 = pad + idx*2*barW + 4;
        const spentH = (data[idx].spent/maxVal) * innerH;
        const incomeH = (data[idx].income/maxVal) * innerH;
        const yS = pad + innerH - spentH;
        const yI = pad + innerH - incomeH;
        svg += `<rect rx="6" x="${x0}" y="${yS}" width="${barW-6}" height="${Math.max(spentH,2)}" fill="${cssVar('--danger')}" opacity=".85">
                  <title>${m.label} ${m.y}\nSpent ${toMoney(data[idx].spent)}</title>
                </rect>`;
        svg += `<rect rx="6" x="${x0+barW}" y="${yI}" width="${barW-6}" height="${Math.max(incomeH,2)}" fill="${cssVar('--accent-2')}" opacity=".85">
                  <title>${m.label} ${m.y}\nIncome ${toMoney(data[idx].income)}</title>
                </rect>`;
        // labels
        svg += `<text x="${x0+barW-6}" y="${H-6}" text-anchor="middle" font-size="12" fill="${cssVar('--muted')}">${m.label}</text>`;
      });
      barChart.innerHTML = svg;
    }

    function drawSpark(){
      // Build last 8 months spending series for sparkline
      const months = [];
      for(let i=7;i>=0;i--){
        const d = new Date(viewYear, viewMonth-i, 1); months.push(d);
      }
      const series = months.map(d=>calcTotals(txForMonth(d.getFullYear(), d.getMonth())).spent);
      const W=80,H=32,pad=2; const max = Math.max(1, ...series), min = Math.min(...series);
      const scaleX = (i)=> pad + (W-pad*2) * (i/(series.length-1));
      const scaleY = (v)=> pad + (H-pad*2) * (1 - (v-min)/(max-min || 1));
      let d=`M ${scaleX(0)} ${scaleY(series[0])}`;
      for(let i=1;i<series.length;i++){ d += ` L ${scaleX(i)} ${scaleY(series[i])}`; }
      const fill = cssVar('--accent');
      sparkSpent.innerHTML = `<path d="${d}" stroke="${fill}" stroke-width="2" fill="none"/>`;
    }

    function cssVar(name){ return getComputedStyle(document.documentElement).getPropertyValue(name).trim(); }

    // ------- Events -------
    form.addEventListener('submit', (e)=>{
      e.preventDefault();
      const payload = {
        date: dateIn.value || new Date().toISOString().slice(0,10),
        type: typeIn.value,
        desc: (descIn.value||'').trim(),
        amount: parseFloat(amtIn.value||'0'),
        cat: (catIn.value||'Misc').trim() || 'Misc'
      };
      if(!payload.desc || !payload.amount){ return }
      addTx(payload);
      form.reset(); setDateInputToView();
    });

    $('#quickExpense').addEventListener('click', ()=>{ typeIn.value='expense'; descIn.focus(); });
    $('#quickIncome').addEventListener('click', ()=>{ typeIn.value='income'; descIn.focus(); });
    $('#jumpToday').addEventListener('click', ()=>{ viewMonth = today.getMonth(); viewYear = today.getFullYear(); render(); });
    $('#prevMonth').addEventListener('click', ()=>{ const d = new Date(viewYear, viewMonth-1, 1); viewYear=d.getFullYear(); viewMonth=d.getMonth(); render(); });
    $('#nextMonth').addEventListener('click', ()=>{ const d = new Date(viewYear, viewMonth+1, 1); viewYear=d.getFullYear(); viewMonth=d.getMonth(); render(); });

    $('#btnClear').addEventListener('click', ()=>{
      if(!confirm('Delete all transactions for this month?')) return;
      const rows = txForMonth(viewYear, viewMonth).map(r=>r.id);
      state.tx = state.tx.filter(t=>!rows.includes(t.id));
      save(); render();
    });

    monthlyBudget.addEventListener('change', ()=>{ state.budget = parseFloat(monthlyBudget.value||'0'); save(); render(); });

    $('#btnExport').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(state,null,2)], {type:'application/json'});
      const a = document.createElement('a'); a.href = URL.createObjectURL(blob); a.download = 'SpendingTrackerBackup.json'; a.click(); URL.revokeObjectURL(a.href);
    });

    $('#btnImport').addEventListener('click', async ()=>{
      const json = prompt('Paste backup JSON here:');
      if(!json) return; try{ const obj = JSON.parse(json); if(obj.tx && Array.isArray(obj.tx)){ localStorage.setItem(KEY, JSON.stringify(obj)); location.reload(); } }catch(e){ alert('Invalid JSON'); }
    });

    $('#seedBtn').addEventListener('click', ()=>{
      if(!confirm('This will add preset transactions for your Fall plan. Continue?')) return;
      const now = new Date();
      const yyyy = now.getFullYear();
      const fallStart = new Date(yyyy, 7, 25); // Aug 25 (semester start approx.)

      const seed = [
        // One-time expenses (scholarships covered all but $185 â€” we just seed Parking to track it; adjust as you like)
        {date: iso(new Date(yyyy,7,15)), type:'expense', desc:'Parking Permit', amount:250.00, cat:'Parking'},
        // Tuition note: covered by scholarships; seed as $0 marker comment via income offset if desired.

        // Monthly recurring (no CapCut per your update)
        {date: iso(new Date(yyyy,7,28)), type:'expense', desc:'Gas', amount:80.00, cat:'Gas'},
        {date: iso(new Date(yyyy,7,28)), type:'expense', desc:'Car Payment', amount:184.19, cat:'Car Payment'},
        {date: iso(new Date(yyyy,7,28)), type:'expense', desc:'ChatGPT', amount:20.00, cat:'ChatGPT'},
        {date: iso(new Date(yyyy,7,28)), type:'expense', desc:'Canva', amount:15.00, cat:'Canva'},
        {date: iso(new Date(yyyy,7,28)), type:'expense', desc:'Medication', amount:17.00, cat:'Medication'},

        // Income & balances
        {date: iso(new Date(yyyy,7,15)), type:'income', desc:'Savings (starting)', amount:3822.37, cat:'Savings'},
        {date: iso(new Date(yyyy,7,30)), type:'income', desc:'Final Paycheck (gross est.)', amount:736.00, cat:'Job Income'},
        {date: iso(new Date(yyyy,7,31)), type:'income', desc:'Direct Subsidized Loan (offer)', amount:2750.00, cat:'Loan'}
      ];
      // Budget per your calc: $316.19/month
      state.budget = 316.19;
      seed.forEach(addTx);
      alert('Seeded! You can edit or delete any item.');
    });

    function iso(d){ return d.toISOString().slice(0,10); }

    // Init
    if(!state.cats || !Array.isArray(state.cats)) state.cats = defaultCats();
    viewMonth = today.getMonth(); viewYear = today.getFullYear();
    refreshCats();
    setDateInputToView();
    render();
  })();
  </script>
</body>
</html>
